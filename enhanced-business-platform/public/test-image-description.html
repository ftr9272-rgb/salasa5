<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار وصف الصور بالذكاء الاصطناعي</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.umd.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom right, #EBF8FF, #ffffff, #F0FFF4);
            min-height: 100vh;
            direction: rtl;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .upload-area:hover {
            border-color: #667eea;
            background-color: #f8fafc;
        }
        .result-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { motion } = Motion;

        // Mock AI service for image description
        const analyzeImage = async (imageFile) => {
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            const mockDescriptions = [
                "صورة منتج عالي الجودة تظهر تفاصيل واضحة مع إضاءة ممتازة. المنتج يبدو جديداً ومعروضاً بطريقة احترافية.",
                "منتج مكتبي باللون الأبيض والأسود، يتميز بتصميم عصري وأنيق. الصورة تُظهر المنتج من زاوية مثالية.",
                "معدات تقنية حديثة تظهر في الصورة بوضوح عالي. التصميم يبدو متطوراً ومناسباً للاستخدام المهني.",
                "أثاث مكتبي بتصميم أنيق ولون محايد. الصورة تُبرز جودة المواد المستخدمة في التصنيع.",
                "منتج إلكتروني بتصميم حديث وألوان جذابة. الصورة توضح الميزات الرئيسية للمنتج بوضوح."
            ];
            
            return mockDescriptions[Math.floor(Math.random() * mockDescriptions.length)];
        };

        function ImageDescriptionApp() {
            const [selectedImage, setSelectedImage] = useState(null);
            const [description, setDescription] = useState('');
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [error, setError] = useState('');

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file && file.type.startsWith('image/')) {
                    setSelectedImage(file);
                    setDescription('');
                    setError('');
                }
            };

            const handleAnalyze = async () => {
                if (!selectedImage) {
                    setError('يرجى تحديد صورة أولاً');
                    return;
                }

                setIsAnalyzing(true);
                setError('');

                try {
                    const result = await analyzeImage(selectedImage);
                    setDescription(result);
                } catch (err) {
                    setError('حدث خطأ أثناء تحليل الصورة. يرجى المحاولة مرة أخرى.');
                } finally {
                    setIsAnalyzing(false);
                }
            };

            return (
                <div style={{ maxWidth: '800px', margin: '40px auto', padding: '20px' }}>
                    <motion.div
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.6 }}
                    >
                        <div style={{ textAlign: 'center', marginBottom: '40px' }}>
                            <h1 style={{ fontSize: '2.5rem', fontWeight: 'bold', color: '#1a202c', marginBottom: '10px' }}>
                                🎯 وصف الصور بالذكاء الاصطناعي
                            </h1>
                            <p style={{ fontSize: '1.2rem', color: '#718096' }}>
                                قم بتحميل صورة واحصل على وصف تفصيلي لمحتواها
                            </p>
                        </div>

                        <div className="card" style={{ padding: '30px' }}>
                            <div className="upload-area" onClick={() => document.getElementById('imageInput').click()}>
                                <input
                                    id="imageInput"
                                    type="file"
                                    accept="image/*"
                                    onChange={handleImageUpload}
                                    style={{ display: 'none' }}
                                />
                                {selectedImage ? (
                                    <div>
                                        <img 
                                            src={URL.createObjectURL(selectedImage)} 
                                            alt="معاينة الصورة" 
                                            style={{ maxWidth: '200px', maxHeight: '200px', borderRadius: '8px', marginBottom: '15px' }}
                                        />
                                        <p style={{ color: '#4a5568', fontWeight: '500' }}>
                                            📸 {selectedImage.name}
                                        </p>
                                        <p style={{ color: '#718096', fontSize: '0.9rem', marginTop: '5px' }}>
                                            انقر لتغيير الصورة
                                        </p>
                                    </div>
                                ) : (
                                    <div>
                                        <div style={{ fontSize: '3rem', marginBottom: '15px' }}>📷</div>
                                        <p style={{ fontSize: '1.1rem', fontWeight: '500', color: '#4a5568', marginBottom: '5px' }}>
                                            انقر لتحميل صورة
                                        </p>
                                        <p style={{ color: '#718096', fontSize: '0.9rem' }}>
                                            PNG, JPG, GIF حتى 10MB
                                        </p>
                                    </div>
                                )}
                            </div>

                            {selectedImage && (
                                <motion.div
                                    initial={{ opacity: 0, y: 10 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    style={{ textAlign: 'center', marginTop: '20px' }}
                                >
                                    <button 
                                        className="btn-primary"
                                        onClick={handleAnalyze}
                                        disabled={isAnalyzing}
                                    >
                                        {isAnalyzing ? (
                                            <>
                                                <span className="spinner"></span>
                                                جاري تحليل الصورة...
                                            </>
                                        ) : (
                                            <>
                                                🔍 تحليل ووصف الصورة
                                            </>
                                        )}
                                    </button>
                                </motion.div>
                            )}

                            {error && (
                                <motion.div
                                    initial={{ opacity: 0, y: 10 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    style={{ 
                                        background: '#fed7d7', 
                                        color: '#c53030', 
                                        padding: '15px', 
                                        borderRadius: '8px', 
                                        marginTop: '20px',
                                        textAlign: 'center'
                                    }}
                                >
                                    ⚠️ {error}
                                </motion.div>
                            )}

                            {description && (
                                <motion.div
                                    initial={{ opacity: 0, y: 10 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    transition={{ duration: 0.5 }}
                                    className="result-box"
                                >
                                    <h3 style={{ fontSize: '1.3rem', fontWeight: 'bold', marginBottom: '15px' }}>
                                        ✨ وصف الصورة:
                                    </h3>
                                    <p style={{ fontSize: '1.1rem', lineHeight: '1.8', textAlign: 'justify' }}>
                                        {description}
                                    </p>
                                </motion.div>
                            )}
                        </div>

                        <div style={{ textAlign: 'center', marginTop: '30px', color: '#718096', fontSize: '0.9rem' }}>
                            <p>🔬 مدعوم بتقنيات الذكاء الاصطناعي المتقدمة</p>
                        </div>
                    </motion.div>
                </div>
            );
        }

        ReactDOM.render(<ImageDescriptionApp />, document.getElementById('root'));
    </script>
</body>
</html>