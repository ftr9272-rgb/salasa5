import{t as Ae,c as Re,r as l,j as e,a as $e,S as Me,R as Pe,U as he,H as Ie,b as ue,d as re,F as se,D as B,e as ve,T as ge,P as me,f as Le,m as I,L as Qe,B as Be,g as ye,C as pe,h as ze,i as Ue,E as Ve,k as Y,l as E,n as R,o as qe,p as Z,q as He,s as ne,u as Ke,v as Ge,w as We,x as Je,X as Xe,y as Ye,z as Ze,O as et,A as P,G as ee,I as tt,J as st,K as at,V as rt,M as nt,N as lt,Q as it,W as dt,Y as ct,Z as ot,_ as mt,$ as xt,a0 as ht,a1 as ut,a2 as Ne,a3 as xe,a4 as gt,a5 as pt,a6 as jt,a7 as yt,a8 as bt}from"./vendor-DwOelw1b.js";function F(...r){return Ae(Re(r))}const D=l.forwardRef(({className:r,...a},i)=>e.jsx("div",{ref:i,className:F("rounded-xl border bg-card text-card-foreground shadow",r),...a}));D.displayName="Card";const O=l.forwardRef(({className:r,...a},i)=>e.jsx("div",{ref:i,className:F("flex flex-col space-y-1.5 p-6",r),...a}));O.displayName="CardHeader";const T=l.forwardRef(({className:r,...a},i)=>e.jsx("h3",{ref:i,className:F("font-semibold leading-none tracking-tight",r),...a}));T.displayName="CardTitle";const ft=l.forwardRef(({className:r,...a},i)=>e.jsx("p",{ref:i,className:F("text-sm text-muted-foreground",r),...a}));ft.displayName="CardDescription";const A=l.forwardRef(({className:r,...a},i)=>e.jsx("div",{ref:i,className:F("p-6 pt-0",r),...a}));A.displayName="CardContent";const vt=l.forwardRef(({className:r,...a},i)=>e.jsx("div",{ref:i,className:F("flex items-center p-6 pt-0",r),...a}));vt.displayName="CardFooter";const Nt=$e("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function w({className:r,variant:a,size:i,asChild:x=!1,...b}){const S=x?Me:"button";return e.jsx(S,{"data-slot":"button",className:F(Nt({variant:a,size:i,className:r})),...b})}function k({className:r,type:a,...i}){return e.jsx("input",{type:a,"data-slot":"input",className:F("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}function y({className:r,...a}){return e.jsx(Pe,{"data-slot":"label",className:F("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...a})}const be={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function _e(){try{return localStorage.getItem("token")||null}catch{return null}}function we(r){try{r?localStorage.setItem("token",r):localStorage.removeItem("token")}catch{}}function ke(){try{localStorage.removeItem("token")}catch{}}async function z(r,a={}){const i="http://127.0.0.1:5000",x=typeof r=="string"&&r.startsWith("/api")?i+r:r,b=_e(),S=a.headers||{};b&&(S.Authorization=`Bearer ${b}`);try{typeof import.meta<"u"}catch{}let d=a.body;if(d&&typeof d=="object"&&!(d instanceof FormData)&&!(d instanceof Blob)&&!(d instanceof URLSearchParams)&&!(d instanceof ArrayBuffer)&&!(ArrayBuffer.isView&&ArrayBuffer.isView(d))&&!S["Content-Type"]){S["Content-Type"]="application/json";try{d=JSON.stringify(d)}catch(c){console.error("Failed to stringify request body for",r,c)}}let u=await fetch(x,{...a,headers:S,body:d});if(u.status===401)try{const c=await fetch(i+"/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(c.ok){const g=await c.json();g&&g.token&&(we(g.token),S.Authorization=`Bearer ${g.token}`,u=await fetch(x,{...a,headers:S,body:d}))}}catch{}if(!u.ok){const c=await u.text();try{typeof import.meta<"u"}catch{}if(u.status===401){ke();try{window.location.href="/auth"}catch{}}throw new Error(`${u.status} ${c}`)}return(u.headers.get("content-type")||"").includes("application/json")?u.json():u.text()}const Ut=Object.freeze(Object.defineProperty({__proto__:null,apiFetch:z,clearToken:ke,getToken:_e,setToken:we},Symbol.toStringTag,{value:"Module"})),Vt=({children:r,activeTab:a,setActiveTab:i,onLogout:x,onGoToMarketplace:b})=>{var v;const S=[{id:"dashboard",name:"لوحة التحكم",icon:Ie},{id:"suppliers",name:"تصفح الموردين",icon:ue},{id:"favorites",name:"الموردين المفضلين",icon:re},{id:"quotation-requests",name:"طلبات عروض الأسعار",icon:se},{id:"received-quotations",name:"عروض الأسعار المستلمة",icon:B},{id:"purchase-orders",name:"طلبات الشراء",icon:ve},{id:"payments",name:"المدفوعات",icon:B},{id:"shipping-companies",name:"شركات الشحن",icon:ge},{id:"shipping-quotes",name:"عروض الشحن",icon:me},{id:"reports",name:"التقارير",icon:se},{id:"profile",name:"الملف الشخصي",icon:he},{id:"settings",name:"الإعدادات",icon:Le}],d=u=>{i(u)};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx("aside",{className:"fixed inset-y-0 right-0 z-50 w-64 bg-white shadow-xl lg:shadow-lg",children:e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(he,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"لوحة التاجر"}),e.jsx("p",{className:"text-sm text-gray-500",children:"مرحباً بك"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-auto",children:S.map(u=>{const N=u.icon,c=a===u.id;return e.jsxs(I.button,{onClick:()=>d(u.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-right transition-all duration-200 ${c?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(N,{className:`h-5 w-5 ${c?"text-white":"text-gray-500"}`}),e.jsx("span",{className:"font-medium",children:u.name})]},u.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-200 mt-auto",children:e.jsxs(I.button,{onClick:x,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-600 hover:bg-red-50 transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Qe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"تسجيل الخروج"})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col mr-64",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:((v=S.find(u=>u.id===a))==null?void 0:v.name)||"لوحة التحكم"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(I.button,{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(me,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"السوق الذكي"})]}),e.jsxs(I.button,{className:"relative p-2 rounded-lg hover:bg-gray-100",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(Be,{className:"h-6 w-6 text-gray-600"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"h-5 w-5 text-white"})})]})]})}),e.jsx("main",{className:"flex-1 p-4 bg-gray-50 overflow-auto",children:e.jsx(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r},a)})]})]})},qt=()=>{const[r,a]=l.useState("daily"),[i,x]=l.useState([]),[b]=l.useState([]),[S,d]=l.useState(!0),[v,u]=l.useState(null),[N,c]=l.useState(null),g=b.length>0?b:[{id:1,type:"order",title:"لا توجد نشاطات حديثة",time:"",icon:ye,iconBg:"bg-gray-100",iconColor:"text-gray-600"}],f={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}};l.useEffect(()=>{(async()=>{try{d(!0);const o=await z("/api/merchant/dashboard");x([{title:"إجمالي المبيعات",value:o.stats.total_spent?o.stats.total_spent.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0",unit:"ر.س",change:"+12.5%",changeType:"positive",icon:B,color:"from-emerald-500 to-teal-400",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{title:"الطلبات الجديدة",value:o.stats.total_orders?o.stats.total_orders:"0",unit:"طلب",change:"+8.2%",changeType:"positive",icon:ye,color:"from-blue-500 to-indigo-400",bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"الموردين النشطين",value:o.stats.favorite_suppliers?o.stats.favorite_suppliers:"0",unit:"مورد",change:"+3.1%",changeType:"positive",icon:ue,color:"from-purple-500 to-pink-400",bgColor:"bg-purple-50",iconColor:"text-purple-600"},{title:"المنتجات المتاحة",value:"1,240",unit:"منتج",change:"+15.3%",changeType:"positive",icon:me,color:"from-amber-500 to-orange-400",bgColor:"bg-amber-50",iconColor:"text-amber-600"}])}catch(o){u(o.message)}finally{d(!1)}})()},[]),l.useEffect(()=>{let m=!1;return(async()=>{try{const t=await z("/api/auth/login",{method:"POST",body:{username:"supplier_demo",password:"123456"}});m||c({status:200,ok:!0,body:t})}catch(t){if(!m){const s=t&&t.message?t.message:String(t);c({error:s})}}})(),()=>{m=!0}},[]);const h=[{id:1,name:"حاسوب محمول للأعمال",supplier:"شركة النور للإلكترونيات",price:3500,originalPrice:null,rating:4.8,image:"https://images.unsplash.com/photo-1593642702821-c8da6771f0c6?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",badge:{text:"جديد",color:"bg-emerald-500"}},{id:2,name:"أثاث مكتبي فاخر",supplier:"مصنع الأخشاب الذهبية",price:1200,originalPrice:null,rating:4.6,image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",badge:{text:"الأكثر مبيعاً",color:"bg-blue-500"}},{id:3,name:"كاميرات مراقبة HD",supplier:"شركة التقنية الآمنة",price:450,originalPrice:null,rating:4.5,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",badge:{text:"مخزون محدود",color:"bg-amber-500"}},{id:4,name:"طابعة ليزر متعددة الوظائف",supplier:"شركة الطباعة الحديثة",price:850,originalPrice:1200,rating:4.7,image:"https://images.unsplash.com/photo-1587854692152-cbe660dbde88?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",badge:{text:"عرض خاص",color:"bg-rose-500"}}];return S?e.jsx("div",{className:"p-8 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"جاري تحميل البيانات..."})]})}):v?e.jsx("div",{className:"p-8 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:v}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsxs("div",{className:"p-8 bg-gray-50 min-h-screen",children:[N&&e.jsx("div",{className:"mb-4 p-3 rounded-lg text-sm",children:N.error?e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-2 rounded",children:["فشل اختبار الدخول: ",String(N.error)]}):e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 p-2 rounded",children:["اختبار الدخول: الحالة ",N.status," — مُنجز بنجاح"]})}),e.jsx(I.div,{className:"bg-gradient-to-br from-emerald-600 to-teal-500 rounded-3xl p-10 text-white shadow-2xl mb-8",...f,children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between",children:[e.jsxs("div",{className:"mb-8 lg:mb-0",children:[e.jsx("h2",{className:"text-4xl font-bold mb-3",children:"مرحباً بك في منصة أعمالي!"}),e.jsx("p",{className:"text-emerald-100 text-lg max-w-2xl",children:"هنا يمكنك إدارة جميع عملياتك التجارية بسلاسة، من الموردين إلى العملاء، كل ذلك في مكان واحد."}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx("button",{className:"bg-white text-emerald-600 px-6 py-2 rounded-full font-bold hover:bg-emerald-50 transition-colors",children:"ابدأ الآن"}),e.jsx("button",{className:"bg-transparent border-2 border-white text-white px-6 py-2 rounded-full font-bold hover:bg-white/10 transition-colors",children:"عرض الدليل"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-6 sm:space-y-0 sm:space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-4xl font-bold",children:"120"}),e.jsx("p",{className:"text-emerald-200",children:"مورد نشط"})]}),e.jsx("div",{className:"w-px h-12 bg-emerald-400 hidden sm:block"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-4xl font-bold",children:"350"}),e.jsx("p",{className:"text-emerald-200",children:"تاجر معتمد"})]}),e.jsx("div",{className:"w-px h-12 bg-emerald-400 hidden sm:block"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-4xl font-bold",children:"1,240"}),e.jsx("p",{className:"text-emerald-200",children:"منتج متاح"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:i.map((m,o)=>e.jsxs(I.div,{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl hover:-translate-y-2 hover:scale-105 transition-all duration-300 relative overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:o*.1},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br opacity-10 rounded-full -translate-y-4 translate-x-4",style:{background:`linear-gradient(135deg, ${m.color.split(" ")[1]}, ${m.color.split(" ")[3]})`}}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 ${m.bgColor} rounded-xl flex items-center justify-center transition-transform duration-300 hover:rotate-12 hover:scale-110`,children:e.jsx(m.icon,{className:`w-6 h-6 ${m.iconColor}`})}),e.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${m.changeType==="positive"?"text-emerald-600 bg-emerald-50":"text-red-600 bg-red-50"}`,children:m.change})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-2",children:m.title}),e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:m.value}),e.jsx("span",{className:"text-gray-500 text-sm mr-2",children:m.unit})]})]},m.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs(I.div,{className:"lg:col-span-1 bg-white rounded-2xl p-6 shadow-lg border border-gray-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"آخر النشاطات"}),e.jsx("div",{className:"space-y-4",children:g.map((m,o)=>e.jsxs(I.div,{className:"flex items-start hover:bg-gray-50 p-3 rounded-lg transition-colors",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.4,delay:.7+o*.1},children:[e.jsx("div",{className:`w-10 h-10 ${m.iconBg} rounded-full flex items-center justify-center flex-shrink-0 ml-3`,children:e.jsx(m.icon,{className:`w-5 h-5 ${m.iconColor}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:m.title}),e.jsx("p",{className:"text-sm text-gray-500",children:m.time})]})]},m.id))}),e.jsx("button",{className:"w-full mt-6 text-center text-emerald-600 font-medium hover:text-emerald-700 transition-colors",children:"عرض كل النشاطات"})]}),e.jsxs(I.div,{className:"lg:col-span-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.6},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"أحدث المنتجات المضافة"}),e.jsxs("button",{className:"text-emerald-600 font-medium hover:text-emerald-700 flex items-center transition-colors",children:[e.jsx("span",{children:"عرض الكل"}),e.jsx(pe,{className:"w-4 h-4 mr-1"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map((m,o)=>e.jsxs(I.div,{className:"bg-white rounded-2xl overflow-hidden shadow-lg border border-gray-100 group hover:shadow-xl hover:-translate-y-2 transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8+o*.1},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.image,alt:m.name,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300"}),e.jsx("span",{className:`absolute top-3 left-3 ${m.badge.color} text-white text-xs font-bold px-2 py-1 rounded-full`,children:m.badge.text})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 line-clamp-1",children:m.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 text-amber-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600 mr-1",children:m.rating})]})]}),e.jsx("p",{className:"text-gray-500 mb-4 text-sm",children:m.supplier}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-xl text-emerald-600",children:[m.price.toLocaleString()," ",e.jsx("span",{className:"text-sm",children:"ر.س"})]}),m.originalPrice&&e.jsxs("span",{className:"text-sm text-gray-500 line-through mr-2",children:[m.originalPrice.toLocaleString()," ر.س"]})]}),e.jsx("button",{className:"bg-emerald-500 text-white px-4 py-2 rounded-full font-semibold hover:bg-emerald-600 transition-colors text-sm",children:"تفاصيل"})]})]})]},m.id))})]})]}),e.jsxs(I.div,{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"أداء المبيعات"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a("daily"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${r==="daily"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"يومي"}),e.jsx("button",{onClick:()=>a("weekly"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${r==="weekly"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"أسبوعي"}),e.jsx("button",{onClick:()=>a("monthly"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${r==="monthly"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"شهري"})]})]}),e.jsx("div",{className:"h-80 flex items-center justify-center bg-gray-50 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ze,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"سيتم عرض الرسم البياني هنا"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["البيانات للفترة: ",r==="daily"?"يومي":r==="weekly"?"أسبوعي":"شهري"]})]})})]}),e.jsxs(I.div,{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"إجراءات سريعة"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"flex flex-col items-center p-4 bg-emerald-50 rounded-xl hover:bg-emerald-100 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(Ue,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"إضافة طلب"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-xl hover:bg-blue-100 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(ue,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"إدارة الموردين"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-xl hover:bg-purple-100 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(ge,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"تتبع الشحنات"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 bg-amber-50 rounded-xl hover:bg-amber-100 transition-colors group",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(Ve,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"عرض التقارير"})]})]})]})]})};let _t=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض الموردين. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const fe=[{id:1,company_name:"شركة النور للإلكترونيات",description:"متخصص في إلكترونيات المكتب والأجهزة المنزلية",rating:4.8,total_orders:24,is_favorite:!0,logo:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",address:"الرياض، المملكة العربية السعودية",email:"info@alnoor-electronics.com",phone:"966-11-234-5678"},{id:2,company_name:"مصنع الأخشاب الذهبية",description:"توريد وتصنيع الأثاث المكتبي والمكتبي",rating:4.6,total_orders:18,is_favorite:!1,logo:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",address:"جدة، المملكة العربية السعودية",email:"sales@golden-wood.com",phone:"966-12-345-6789"},{id:3,company_name:"شركة التقنية الآمنة",description:"أنظمة المراقبة الأمنية وحلول الحماية",rating:4.7,total_orders:32,is_favorite:!1,logo:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",address:"الدمام، المملكة العربية السعودية",email:"contact@secure-tech.com",phone:"966-13-456-7890"},{id:4,company_name:"شركة الطباعة الحديثة",description:"خدمات الطباعة الرقمية والتصميم",rating:4.5,total_orders:15,is_favorite:!0,logo:"https://images.unsplash.com/photo-1587854692152-cbe660dbde88?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",address:"الرياض، المملكة العربية السعودية",email:"info@modern-print.com",phone:"966-14-567-8901"},{id:5,company_name:"مؤسسة المعدات الثقيلة",description:"توريد وصيانة المعدات الثقيلة",rating:4.4,total_orders:9,is_favorite:!1,logo:"https://images.unsplash.com/photo-1544025162-d76694265947?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",address:"الدمام، المملكة العربية السعودية",email:"sales@heavy-equip.com",phone:"966-15-678-9012"},{id:6,company_name:"شركة الأمن الشامل",description:"خدمات الأمن وحماية المنشآت",rating:4.3,total_orders:12,is_favorite:!1,logo:"https://images.unsplash.com/photo-1554224154-1a7f3e871c6f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",address:"جدة، المملكة العربية السعودية",email:"contact@comprehensive-security.com",phone:"966-16-789-0123"}],Kt=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(""),[u,N]=l.useState(1),[c,g]=l.useState(1),f=Y.useCallback(async(o=1,t="")=>{x(!0);try{await new Promise(U=>setTimeout(U,800));let s=fe;t&&(s=fe.filter(U=>U.company_name.toLowerCase().includes(t.toLowerCase())||U.description.toLowerCase().includes(t.toLowerCase())));const n=6,j=(o-1)*n,$=j+n,Q=s.slice(j,$);a(Q),g(Math.ceil(s.length/n)),N(o)}catch(s){console.error("Error fetching suppliers:",s),S("حدث خطأ أثناء تحميل الموردين")}finally{x(!1)}},[]);l.useEffect(()=>{f()},[f]);const h=()=>{f(1,d)},m=async o=>{try{await new Promise(t=>setTimeout(t,500)),a(t=>t.map(s=>s.id===o?{...s,is_favorite:!0}:s)),alert("تم إضافة المورد إلى المفضلة بنجاح!")}catch(t){alert(`خطأ: ${t.message}`)}};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل الموردين..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>f(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(_t,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"تصفح الموردين"}),e.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse",children:[e.jsx(k,{type:"text",placeholder:"ابحث عن مورد...",value:d,onChange:o=>v(o.target.value),className:"max-w-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-700"}),e.jsxs(w,{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(qe,{className:"h-4 w-4 ml-2"})," بحث"]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(o=>{var t;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:o.logo||"https://via.placeholder.com/80",alt:o.company_name,className:"w-12 h-12 rounded-full object-cover mr-3"}),e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o.company_name})]}),o.is_favorite&&e.jsx(re,{className:"h-5 w-5 text-yellow-500",fill:"currentColor"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.description})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-500 ml-2"}),e.jsxs("span",{children:["التقييم: ",((t=o.rating)==null?void 0:t.toFixed(1))||"N/A"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["إجمالي الطلبات: ",o.total_orders||0]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📍"})," ",o.address]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:"mr-2",children:"📧"})," ",o.email]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx(He,{to:`/merchant/suppliers/${o.id}/products`,children:e.jsxs(w,{variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-400",children:["عرض المنتجات ",e.jsx(Z,{className:"h-4 w-4 mr-2"})]})}),o.is_favorite?e.jsxs(w,{disabled:!0,className:"bg-gray-400 dark:bg-gray-600 text-white cursor-not-allowed",children:[e.jsx(re,{className:"h-4 w-4 ml-2"})," في المفضلة"]}):e.jsxs(w,{onClick:()=>m(o.id),className:"bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(ne,{className:"h-4 w-4 ml-2"})," إضافة للمفضلة"]})]})]})]},o.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد موردين لعرضهم."}),e.jsx("button",{onClick:()=>f(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}),c>1&&e.jsxs("div",{className:"flex justify-center space-x-2 rtl:space-x-reverse mt-6",children:[e.jsx(w,{onClick:()=>f(u-1,d),disabled:u===1,variant:"outline",className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-700",children:"السابق"}),[...Array(c)].map((o,t)=>e.jsx(w,{onClick:()=>f(t+1,d),variant:u===t+1?"default":"outline",className:u===t+1?"bg-blue-600 hover:bg-blue-700 text-white":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-700",children:t+1},t)),e.jsx(w,{onClick:()=>f(u+1,d),disabled:u===c,variant:"outline",className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-700",children:"التالي"})]})]})})};function q({...r}){return e.jsx(Ke,{"data-slot":"dialog",...r})}function H({...r}){return e.jsx(Ge,{"data-slot":"dialog-trigger",...r})}function wt({...r}){return e.jsx(Ze,{"data-slot":"dialog-portal",...r})}function kt({className:r,...a}){return e.jsx(et,{"data-slot":"dialog-overlay",className:F("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...a})}function K({className:r,children:a,...i}){return e.jsxs(wt,{"data-slot":"dialog-portal",children:[e.jsx(kt,{}),e.jsxs(We,{"data-slot":"dialog-content",className:F("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...i,children:[a,e.jsxs(Je,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Xe,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function G({className:r,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:F("flex flex-col gap-2 text-center sm:text-left",r),...a})}function W({className:r,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:F("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...a})}function J({className:r,...a}){return e.jsx(Ye,{"data-slot":"dialog-title",className:F("text-lg leading-none font-semibold",r),...a})}function L({className:r,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:F("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...a})}let St=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const Wt=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),[f,h]=l.useState(0);l.useEffect(()=>{(async()=>{x(!0);try{await new Promise(j=>setTimeout(j,800)),a([{id:1,title:"عرض سعر: أثاث مكتبي",description:"عرض سعر لتوريد أثاث مكتبي متكامل",supplier:{id:1,company_name:"شركة النور للإلكترونيات"},total_amount:18500,status:"sent",items:[{name:"مكاتب إدارية",quantity:8}],created_at:"2024-01-12",valid_until:"2024-02-12"},{id:2,title:"عرض سعر: إلكترونيات مكتبية",description:"عرض سعر لتوريد أجهزة كمبيوتر",supplier:{id:3,company_name:"شركة التقنية الآمنة"},total_amount:22e3,status:"accepted",items:[{name:"حواسيب محمولة",quantity:6}],created_at:"2024-01-10",accepted_at:"2024-01-15"}])}catch(n){console.error("Error fetching quotations:",n),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}})()},[f]);const m=s=>{const{name:n,value:j}=s.target;g($=>({...$,[n]:j}))},o=async s=>{if(s.preventDefault(),!!d){x(!0);try{await new Promise(n=>setTimeout(n,1e3)),a(n=>n.map(j=>j.id===d.id?{...j,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:j)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(n){alert(`خطأ: ${n.message}`)}finally{x(!1)}}},t=s=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(n=>n.map(j=>j.id===s?{...j,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:j)),alert("تم رفض عرض السعر بنجاح"))};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>h(s=>s+1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(St,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"منتجات المورد"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(s=>{var n,j;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":s.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":s.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:s.status==="sent"?"مرسل":s.status==="accepted"?"مقبول":s.status==="rejected"?"مرفوض":s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((n=s.supplier)==null?void 0:n.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(j=s.total_amount)==null?void 0:j.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",s.items.length]})]}),s.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(s.valid_until).toLocaleDateString("ar-SA")]}),s.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",s.order_number]}),s.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",s.rejection_reason]}),s.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===s.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(s),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:m,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:m,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:m,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:m,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>t(s.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},s.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})};let Ct=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const Et=[{id:1,title:"عرض سعر: أثاث مكتبي",description:"عرض سعر لتوريد أثاث مكتبي متكامل",supplier:{id:1,company_name:"شركة النور للإلكترونيات"},total_amount:18500,status:"sent",items:[{name:"مكاتب إدارية",quantity:8,price:3e3,unit:"قطعة"},{name:"كراسي مكتب",quantity:12,price:750,unit:"قطعة"},{name:"خزانات أوراق",quantity:4,price:1200,unit:"قطعة"}],created_at:"2024-01-12",valid_until:"2024-02-12",delivery_terms:"15 يوم عمل من تاريخ الموافقة",payment_terms:"50% مقدم، 50% عند التسليم"},{id:2,title:"عرض سعر: إلكترونيات مكتبية",description:"عرض سعر لتوريد أجهزة كمبيوتر ومعدات إلكترونية",supplier:{id:3,company_name:"شركة التقنية الآمنة"},total_amount:22e3,status:"accepted",items:[{name:"حواسيب محمولة",quantity:6,price:4e3,unit:"قطعة"},{name:"شاشات عرض",quantity:8,price:2e3,unit:"قطعة"},{name:"طابعات ليزر",quantity:2,price:1500,unit:"قطعة"}],created_at:"2024-01-10",accepted_at:"2024-01-15",order_number:"ORD-2024-001",delivery_terms:"10 يوم عمل من تاريخ الموافقة",payment_terms:"دفع كامل عند التسليم"},{id:3,title:"عرض سعر: نظام أمني",description:"عرض سعر لتوريد وتركيب نظام مراقبة أمنية",supplier:{id:2,company_name:"مصنع الأخشاب الذهبية"},total_amount:12500,status:"sent",items:[{name:"كاميرات مراقبة",quantity:10,price:500,unit:"قطعة"},{name:"جهاز تسجيل",quantity:2,price:1e3,unit:"جهاز"},{name:"شاشات عرض",quantity:2,price:2e3,unit:"قطعة"}],created_at:"2024-01-14",valid_until:"2024-02-14",delivery_terms:"7 يوم عمل من تاريخ الموافقة",payment_terms:"30% مقدم، 70% عند التسليم"},{id:4,title:"عرض سعر: طابعة ضغط",description:"عرض سعر لتوريد طابعة ضغط كبيرة",supplier:{id:4,company_name:"شركة الطباعة الحديثة"},total_amount:8500,status:"rejected",items:[{name:"طابعة ضغط كبيرة",quantity:1,price:3500,unit:"جهاز"},{name:"حبر طابعة ملون",quantity:5,price:150,unit:"عبوة"},{name:"ورق طباعة",quantity:10,price:200,unit:"حزمة"}],created_at:"2024-01-08",rejected_at:"2024-01-12",rejection_reason:"الع سعر أعلى من الميزانية المخصصة"}],Xt=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),f=l.useCallback(async()=>{x(!0);try{await new Promise(t=>setTimeout(t,800)),a(Et)}catch(t){console.error("Error fetching quotations:",t),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}},[]);l.useEffect(()=>{f()},[f]);const h=t=>{const{name:s,value:n}=t.target;g(j=>({...j,[s]:n}))},m=async t=>{if(t.preventDefault(),!!d){x(!0);try{await new Promise(s=>setTimeout(s,1e3)),a(s=>s.map(n=>n.id===d.id?{...n,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:n)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(s){alert(`خطأ: ${s.message}`)}finally{x(!1)}}},o=t=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(s=>s.map(n=>n.id===t?{...n,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:n)),alert("تم رفض عرض السعر بنجاح"))};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>f(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(Ct,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"الموردين المفضلين"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(t=>{var s,n;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":t.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":t.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:t.status==="sent"?"مرسل":t.status==="accepted"?"مقبول":t.status==="rejected"?"مرفوض":t.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((s=t.supplier)==null?void 0:s.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(n=t.total_amount)==null?void 0:n.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",t.items.length]})]}),t.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(t.valid_until).toLocaleDateString("ar-SA")]}),t.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",t.order_number]}),t.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",t.rejection_reason]}),t.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===t.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(t),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:h,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:h,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:h,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:h,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>o(t.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},t.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})};function ie({...r}){return e.jsx(tt,{"data-slot":"select",...r})}function de({...r}){return e.jsx(rt,{"data-slot":"select-value",...r})}function ce({className:r,size:a="default",children:i,...x}){return e.jsxs(st,{"data-slot":"select-trigger","data-size":a,className:F("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:[data-slot=select-value]:line-clamp-1 *:[data-slot=select-value]:flex *:[data-slot=select-value]:items-center *:[data-slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...x,children:[i,e.jsx(at,{asChild:!0,children:e.jsx(pe,{className:"size-4 opacity-50"})})]})}function oe({className:r,children:a,position:i="popper",...x}){return e.jsx(nt,{children:e.jsxs(lt,{"data-slot":"select-content",className:F("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...x,children:[e.jsx(Ft,{}),e.jsx(it,{className:F("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(Dt,{})]})})}function V({className:r,children:a,...i}){return e.jsxs(dt,{"data-slot":"select-item",className:F("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...i,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ct,{children:e.jsx(ot,{className:"size-4"})})}),e.jsx(mt,{children:a})]})}function Ft({className:r,...a}){return e.jsx(xt,{"data-slot":"select-scroll-up-button",className:F("flex cursor-default items-center justify-center py-1",r),...a,children:e.jsx(ht,{className:"size-4"})})}function Dt({className:r,...a}){return e.jsx(ut,{"data-slot":"select-scroll-down-button",className:F("flex cursor-default items-center justify-center py-1",r),...a,children:e.jsx(pe,{className:"size-4"})})}let Ot=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض طلبات عروض الأسعار. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const Tt=[{id:1,request_number:"QR-2024-001",title:"طلب عرض سعر: أثاث مكتبي",description:"طلب لتوريد أثاث مكتبي متكامل للمكاتب",delivery_date_required:"2024-02-15",delivery_address:"الرياض، المملكة العربية السعودية",notes:"ملاحظات إضافية حول الطلب",status:"sent",items:[{product_name:"مكاتب إدارية",quantity_needed:8,unit:"قطعة",max_price:"3000",specifications:"مقاس 160x80 سم"}],created_at:"2024-01-10",quotations_count:3},{id:2,request_number:"QR-2024-002",title:"طلب عرض سعر: إلكترونيات مكتبية",description:"طلب لتوريد أجهزة كمبيوتر ومعدات إلكترونية للمؤسسة",delivery_date_required:"2024-02-20",delivery_address:"جدة، المملكة العربية السعودية",notes:"ملاحظات حول التوافق والمتطلبات الفنية",status:"sent",items:[{product_name:"حواسيب محمولة",quantity_needed:6,unit:"قطعة",max_price:"4000",specifications:"Intel i7, 16GB RAM, 512GB SSD"}],created_at:"2024-01-15",quotations_count:2}],Zt=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState({title:"",description:"",delivery_date_required:"",delivery_address:"",notes:"",items:[{product_name:"",quantity_needed:"",unit:"",max_price:"",specifications:""}]}),[u,N]=l.useState(!1),c=l.useCallback(async()=>{x(!0);try{await new Promise(t=>setTimeout(t,800)),a(Tt)}catch(t){console.error("Error fetching requests:",t),S("حدث خطأ أثناء تحميل الطلبات")}finally{x(!1)}},[]);l.useEffect(()=>{c()},[c]);const g=t=>{const{name:s,value:n}=t.target;v(j=>({...j,[s]:n}))},f=(t,s)=>{const{name:n,value:j}=s.target,$=d.items.map((Q,U)=>U===t?{...Q,[n]:j}:Q);v(Q=>({...Q,items:$}))},h=()=>{v(t=>({...t,items:[...t.items,{product_name:"",quantity_needed:"",unit:"",max_price:"",specifications:""}]}))},m=t=>{v(s=>({...s,items:s.items.filter((n,j)=>j!==t)}))},o=async t=>{t.preventDefault(),x(!0);try{await new Promise(n=>setTimeout(n,1e3));const s={id:r.length+1,request_number:`QR-2024-${String(r.length+1).padStart(3,"0")}`,title:d.title,description:d.description,delivery_date_required:d.delivery_date_required,delivery_address:d.delivery_address,notes:d.notes,status:"draft",items:d.items,created_at:new Date().toISOString().split("T")[0],quotations_count:0};a(n=>[s,...n]),alert("تم إنشاء طلب عرض السعر بنجاح!"),N(!1),v({title:"",description:"",delivery_date_required:"",delivery_address:"",notes:"",items:[{product_name:"",quantity_needed:"",unit:"",max_price:"",specifications:""}]})}catch(s){alert(`خطأ: ${s.message}`)}finally{x(!1)}};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل طلبات عروض الأسعار..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"تعذر تحميل الطلبات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(Ot,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"طلبات عروض الأسعار"}),e.jsxs(q,{open:u,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ne,{className:"h-4 w-4 ml-2"})," إنشاء طلب جديد"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"إنشاء طلب عرض سعر جديد"})}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"title",children:"العنوان"}),e.jsx(k,{id:"title",name:"title",value:d.title,onChange:g,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"description",children:"الوصف"}),e.jsx(L,{id:"description",name:"description",value:d.description,onChange:g})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_required",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_required",name:"delivery_date_required",type:"date",value:d.delivery_date_required,onChange:g})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:d.delivery_address,onChange:g})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:d.notes,onChange:g})]}),e.jsx("h3",{className:"text-lg font-semibold mt-6",children:"تفاصيل العناصر"}),d.items.map((t,s)=>e.jsxs(D,{className:"p-4 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:`product_name-${s}`,children:"اسم المنتج"}),e.jsx(k,{id:`product_name-${s}`,name:"product_name",value:t.product_name,onChange:n=>f(s,n),required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:`quantity_needed-${s}`,children:"الكمية المطلوبة"}),e.jsx(k,{id:`quantity_needed-${s}`,name:"quantity_needed",type:"number",value:t.quantity_needed,onChange:n=>f(s,n),required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:`unit-${s}`,children:"الوحدة"}),e.jsx(k,{id:`unit-${s}`,name:"unit",value:t.unit,onChange:n=>f(s,n)})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:`max_price-${s}`,children:"أقصى سعر (ر.س)"}),e.jsx(k,{id:`max_price-${s}`,name:"max_price",type:"number",step:"0.01",value:t.max_price,onChange:n=>f(s,n)})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx(y,{htmlFor:`specifications-${s}`,children:"المواصفات"}),e.jsx(L,{id:`specifications-${s}`,name:"specifications",value:t.specifications,onChange:n=>f(s,n)})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(w,{type:"button",variant:"destructive",onClick:()=>m(s),children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," حذف عنصر"]})})]},s)),e.jsxs(w,{type:"button",variant:"outline",onClick:h,className:"w-full",children:[e.jsx(ne,{className:"h-4 w-4 ml-2"})," إضافة منتج جديد"]}),e.jsx(W,{children:e.jsxs(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:[e.jsx(Ne,{className:"h-4 w-4 ml-2"})," إرسال الطلب"]})})]})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(t=>e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":t.status==="draft"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"}`,children:["الحالة: ",t.status==="sent"?"مرسل":t.status==="draft"?"مسودة":t.status]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["رقم الطلب: ",t.request_number]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(xe,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["تاريخ التسليم المطلوب: ",t.delivery_date_required]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(se,{className:"h-4 w-4 text-purple-500 ml-2"}),e.jsxs("span",{children:["عدد العناصر: ",t.items.length]})]}),t.quotations_count>0&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(se,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["عدد العروض: ",t.quotations_count]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["منذ: ",t.created_at]}),e.jsx(w,{variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-400",children:"عرض التفاصيل"})]})]})]},t.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(se,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد طلبات لعرضها حالياً."})]})})]})})};let At=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const ts=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),f=l.useCallback(async()=>{x(!0);try{await new Promise(s=>setTimeout(s,800)),a([{id:1,title:"عرض سعر: أثاث مكتبي",description:"عرض سعر لتوريد أثاث مكتبي متكامل",supplier:{id:1,company_name:"شركة النور للإلكترونيات"},total_amount:18500,status:"sent",items:[{name:"مكاتب إدارية",quantity:8,price:3e3,unit:"قطعة"},{name:"كراسي مكتب",quantity:12,price:750,unit:"قطعة"},{name:"خزانات أوراق",quantity:4,price:1200,unit:"قطعة"}],created_at:"2024-01-12",valid_until:"2024-02-12",delivery_terms:"15 يوم عمل من تاريخ الموافقة",payment_terms:"50% مقدم، 50% عند التسليم"},{id:2,title:"عرض سعر: إلكترونيات مكتبية",description:"عرض سعر لتوريد أجهزة كمبيوتر ومعدات إلكترونية",supplier:{id:3,company_name:"شركة التقنية الآمنة"},total_amount:22e3,status:"accepted",items:[{name:"حواسيب محمولة",quantity:6,price:4e3,unit:"قطعة"},{name:"شاشات عرض",quantity:8,price:2e3,unit:"قطعة"},{name:"طابعات ليزر",quantity:2,price:1500,unit:"قطعة"}],created_at:"2024-01-10",accepted_at:"2024-01-15",order_number:"ORD-2024-001",delivery_terms:"10 يوم عمل من تاريخ الموافقة",payment_terms:"دفع كامل عند التسليم"},{id:3,title:"عرض سعر: نظام أمني",description:"عرض سعر لتوريد وتركيب نظام مراقبة أمنية",supplier:{id:2,company_name:"مصنع الأخشاب الذهبية"},total_amount:12500,status:"sent",items:[{name:"كاميرات مراقبة",quantity:10,price:500,unit:"قطعة"},{name:"جهاز تسجيل",quantity:2,price:1e3,unit:"جهاز"},{name:"شاشات عرض",quantity:2,price:2e3,unit:"قطعة"}],created_at:"2024-01-14",valid_until:"2024-02-14",delivery_terms:"7 يوم عمل من تاريخ الموافقة",payment_terms:"30% مقدم، 70% عند التسليم"},{id:4,title:"عرض سعر: طابعة ضغط",description:"عرض سعر لتوريد طابعة ضغط كبيرة",supplier:{id:4,company_name:"شركة الطباعة الحديثة"},total_amount:8500,status:"rejected",items:[{name:"طابعة ضغط كبيرة",quantity:1,price:3500,unit:"جهاز"},{name:"حبر طابعة ملون",quantity:5,price:150,unit:"عبوة"},{name:"ورق طباعة",quantity:10,price:200,unit:"حزمة"}],created_at:"2024-01-08",rejected_at:"2024-01-12",rejection_reason:"الع سعر أعلى من الميزانية المخصصة"}])}catch(t){console.error("Error fetching quotations:",t),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}},[]);l.useEffect(()=>{f()},[f]);const h=t=>{const{name:s,value:n}=t.target;g(j=>({...j,[s]:n}))},m=async t=>{if(t.preventDefault(),!!d){x(!0);try{await new Promise(s=>setTimeout(s,1e3)),a(s=>s.map(n=>n.id===d.id?{...n,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:n)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(s){alert(`خطأ: ${s.message}`)}finally{x(!1)}}},o=t=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(s=>s.map(n=>n.id===t?{...n,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:n)),alert("تم رفض عرض السعر بنجاح"))};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>f(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(At,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"عروض الأسعار المستلمة"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(t=>{var s,n;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":t.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":t.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:t.status==="sent"?"مرسل":t.status==="accepted"?"مقبول":t.status==="rejected"?"مرفوض":t.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((s=t.supplier)==null?void 0:s.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(n=t.total_amount)==null?void 0:n.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",t.items.length]})]}),t.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(t.valid_until).toLocaleDateString("ar-SA")]}),t.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",t.order_number]}),t.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",t.rejection_reason]}),t.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===t.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(t),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:h,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:h,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:h,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:h,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>o(t.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},t.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})};let Rt=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const $t=[{id:1,title:"عرض سعر: أثاث مكتبي",description:"عرض سعر لتوريد أثاث مكتبي متكامل",supplier:{id:1,company_name:"شركة النور للإلكترونيات"},total_amount:18500,status:"sent",items:[{name:"مكاتب إدارية",quantity:8,price:3e3,unit:"قطعة"},{name:"كراسي مكتب",quantity:12,price:750,unit:"قطعة"},{name:"خزانات أوراق",quantity:4,price:1200,unit:"قطعة"}],created_at:"2024-01-12",valid_until:"2024-02-12",delivery_terms:"15 يوم عمل من تاريخ الموافقة",payment_terms:"50% مقدم، 50% عند التسليم"},{id:2,title:"عرض سعر: إلكترونيات مكتبية",description:"عرض سعر لتوريد أجهزة كمبيوتر ومعدات إلكترونية",supplier:{id:3,company_name:"شركة التقنية الآمنة"},total_amount:22e3,status:"accepted",items:[{name:"حواسيب محمولة",quantity:6,price:4e3,unit:"قطعة"},{name:"شاشات عرض",quantity:8,price:2e3,unit:"قطعة"},{name:"طابعات ليزر",quantity:2,price:1500,unit:"قطعة"}],created_at:"2024-01-10",accepted_at:"2024-01-15",order_number:"ORD-2024-001",delivery_terms:"10 يوم عمل من تاريخ الموافقة",payment_terms:"دفع كامل عند التسليم"},{id:3,title:"عرض سعر: نظام أمني",description:"عرض سعر لتوريد وتركيب نظام مراقبة أمنية",supplier:{id:2,company_name:"مصنع الأخشاب الذهبية"},total_amount:12500,status:"sent",items:[{name:"كاميرات مراقبة",quantity:10,price:500,unit:"قطعة"},{name:"جهاز تسجيل",quantity:2,price:1e3,unit:"جهاز"},{name:"شاشات عرض",quantity:2,price:2e3,unit:"قطعة"}],created_at:"2024-01-14",valid_until:"2024-02-14",delivery_terms:"7 يوم عمل من تاريخ الموافقة",payment_terms:"30% مقدم، 70% عند التسليم"},{id:4,title:"عرض سعر: طابعة ضغط",description:"عرض سعر لتوريد طابعة ضغط كبيرة",supplier:{id:4,company_name:"شركة الطباعة الحديثة"},total_amount:8500,status:"rejected",items:[{name:"طابعة ضغط كبيرة",quantity:1,price:3500,unit:"جهاز"},{name:"حبر طابعة ملون",quantity:5,price:150,unit:"عبوة"},{name:"ورق طباعة",quantity:10,price:200,unit:"حزمة"}],created_at:"2024-01-08",rejected_at:"2024-01-12",rejection_reason:"السعر أعلى من الميزانية المخصصة"}],as=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),[f,h]=l.useState(0),[m,o]=l.useState(!1),[t,s]=l.useState([]),[n,j]=l.useState({supplier_id:"",items:[{product_name:"",quantity:1,unit_price:0}],currency:"SAR",payment_method:"bank_transfer",delivery_address:"",notes:""}),[$,Q]=l.useState(null),[U,Se]=l.useState(0);l.useEffect(()=>{(async()=>{x(!0);try{await new Promise(_=>setTimeout(_,800)),a($t)}catch(_){console.error("Error fetching quotations:",_),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}})()},[f]),l.useEffect(()=>{let p=!0;return(async()=>{try{const _=await z("/api/merchant/suppliers");if(!p)return;s(_.suppliers||[])}catch(_){console.debug("Failed to load suppliers for create form",_)}})(),()=>{p=!1}},[]);const le=p=>{const{name:_,value:C}=p.target;g(M=>({...M,[_]:C}))},Ce=async p=>{if(p.preventDefault(),!!d){x(!0);try{await new Promise(_=>setTimeout(_,1e3)),a(_=>_.map(C=>C.id===d.id?{...C,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:C)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(_){alert(`خطأ: ${_.message}`)}finally{x(!1)}}},Ee=p=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(_=>_.map(C=>C.id===p?{...C,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:C)),alert("تم رفض عرض السعر بنجاح"))},ae=(p,_,C)=>{j(M=>{const X={...M};if(_.startsWith("item:")){const te=_.split(":")[1];X.items=X.items.map((je,Te)=>Te===p?{...je,[te]:C}:je)}else X[_]=C;return X})},Fe=()=>j(p=>({...p,items:[...p.items,{product_name:"",quantity:1,unit_price:0}]})),De=p=>j(_=>({..._,items:_.items.filter((C,M)=>M!==p)})),Oe=async p=>{var C;p&&p.preventDefault();const _=[];if(n.supplier_id||_.push("المورد مطلوب"),n.delivery_address||_.push("عنوان التسليم مطلوب"),n.items.forEach((M,X)=>{(!M.product_name||String(M.product_name).trim()==="")&&_.push(`اسم المنتج في الصف ${X+1} مطلوب`),Number(M.quantity)>0||_.push(`الكمية في الصف ${X+1} يجب أن تكون أكبر من 0`),Number(M.unit_price)>=0||_.push(`سعر الوحدة في الصف ${X+1} يجب أن يكون رقمياً`)}),_.length){Q(_);return}Q(null);try{const M={supplier_id:Number(n.supplier_id),items:n.items.map(te=>({product_name:te.product_name,quantity:Number(te.quantity),unit_price:Number(te.unit_price)})),currency:n.currency,payment_method:n.payment_method,delivery_address:n.delivery_address,notes:n.notes},X=await z("/api/merchant/purchase-orders",{method:"POST",body:M});Q([`تم إنشاء طلب الشراء بنجاح: ${((C=X.purchase_order)==null?void 0:C.order_number)||""}`]),setTimeout(()=>{o(!1),j({supplier_id:"",items:[{product_name:"",quantity:1,unit_price:0}],currency:"SAR",payment_method:"bank_transfer",delivery_address:"",notes:""}),h(te=>te+1),Q(null)},900)}catch(M){Q([`فشل إنشاء طلب الشراء: ${M.message}`])}};return l.useEffect(()=>{const p=n.items.reduce((_,C)=>_+Number(C.quantity||0)*Number(C.unit_price||0),0);Se(p)},[n.items]),i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>h(p=>p+1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(Rt,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"طلبات الشراء"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(q,{open:m,onOpenChange:o,children:[e.jsx(H,{asChild:!0,children:e.jsx(w,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"إنشاء طلب جديد"})}),e.jsxs(K,{className:"sm:max-w-[700px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"إنشاء طلب شراء جديد"})}),e.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{children:"المورد"}),e.jsxs("select",{value:n.supplier_id,onChange:p=>ae(0,"supplier_id",p.target.value),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:t.length?"اختر المورد":"لا يوجد موردون متاحون"}),t.map(p=>e.jsx("option",{value:p.id,children:p.company_name},p.id))]})]}),e.jsxs("div",{children:[e.jsx(y,{children:"عناصر الطلب"}),e.jsxs("div",{className:"space-y-2",children:[n.items.map((p,_)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsx("div",{className:"col-span-6",children:e.jsx(k,{placeholder:"اسم المنتج",value:p.product_name,onChange:C=>ae(_,"item:product_name",C.target.value),required:!0})}),e.jsx("div",{className:"col-span-2",children:e.jsx(k,{type:"number",min:"1",value:p.quantity,onChange:C=>ae(_,"item:quantity",C.target.value),required:!0})}),e.jsx("div",{className:"col-span-2",children:e.jsx(k,{type:"number",step:"0.01",min:"0",value:p.unit_price,onChange:C=>ae(_,"item:unit_price",C.target.value),required:!0})}),e.jsx("div",{className:"col-span-2",children:e.jsx(w,{type:"button",onClick:()=>De(_),className:"bg-red-600 hover:bg-red-700",children:"حذف"})})]},_)),e.jsx("div",{children:e.jsx(w,{type:"button",onClick:Fe,className:"mt-2",children:"إضافة عنصر"})})]})]}),e.jsxs("div",{children:[e.jsx(y,{children:"عنوان التسليم"}),e.jsx(k,{value:n.delivery_address,onChange:p=>ae(0,"delivery_address",p.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{children:"ملاحظات"}),e.jsx(L,{value:n.notes,onChange:p=>ae(0,"notes",p.target.value)})]}),$&&$.length>0&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:e.jsx("ul",{className:"list-disc list-inside space-y-1",children:$.map((p,_)=>e.jsx("li",{children:p},_))})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["المجموع التقديري: ",e.jsxs("span",{className:"font-medium",children:[U.toLocaleString?U.toLocaleString("ar-SA"):U," ",n.currency]})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:!!($&&$.length)||U<=0,children:"إنشاء الطلب"})})]})]})]})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(p=>{var _,C;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:p.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":p.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":p.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:p.status==="sent"?"مرسل":p.status==="accepted"?"مقبول":p.status==="rejected"?"مرفوض":p.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((_=p.supplier)==null?void 0:_.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(C=p.total_amount)==null?void 0:C.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",p.items.length]})]}),p.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(p.valid_until).toLocaleDateString("ar-SA")]}),p.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",p.order_number]}),p.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",p.rejection_reason]}),p.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===p.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(p),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:le,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:le,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:le,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:le,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>Ee(p.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},p.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})},rs=()=>{var u,N;const{orderId:r}=gt(),[a,i]=l.useState(null),[x,b]=l.useState(!0),[S,d]=l.useState(null);l.useEffect(()=>{(async()=>{try{const g=await z(`/api/merchant/purchase-orders/${r}`);i(g.order)}catch(g){d(g.message)}finally{b(!1)}})()},[r]);const v=c=>{switch(c){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"confirmed":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"processing":return"bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100";case"shipped":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100";case"delivered":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return x?e.jsx("div",{className:"text-center py-8",children:"جاري تحميل تفاصيل الطلب..."}):S?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["خطأ في تحميل البيانات: ",S]}):a?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["تفاصيل طلب الشراء #",a.order_number]}),e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[e.jsx(O,{children:e.jsx(T,{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"معلومات الطلب"})}),e.jsxs(A,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(ve,{className:"h-5 w-5 text-blue-500 ml-2"}),e.jsxs("span",{children:["المورد: ",((u=a.supplier)==null?void 0:u.company_name)||"غير معروف"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-5 w-5 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(N=a.total_amount)==null?void 0:N.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(xe,{className:"h-5 w-5 text-purple-500 ml-2"}),e.jsxs("span",{children:["تاريخ الطلب: ",new Date(a.created_at).toLocaleDateString("ar-SA")]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(pt,{className:"h-5 w-5 text-red-500 ml-2"}),e.jsxs("span",{children:["عنوان التسليم: ",a.delivery_address]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(se,{className:"h-5 w-5 text-orange-500 ml-2"}),e.jsxs("span",{children:["طريقة الدفع: ",a.payment_method]})]}),e.jsx("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${v(a.status)}`,children:["الحالة: ",a.status==="pending"?"معلق":a.status==="confirmed"?"مؤكد":a.status==="processing"?"قيد المعالجة":a.status==="shipped"?"تم الشحن":a.status==="delivered"?"تم التسليم":a.status==="cancelled"?"ملغي":a.status]})}),e.jsx("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.payment_status==="paid"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":a.payment_status==="partial"?"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"}`,children:["حالة الدفع: ",a.payment_status==="paid"?"مدفوع":a.payment_status==="partial"?"مدفوع جزئياً":"معلق"]})})]})]}),e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[e.jsx(O,{children:e.jsx(T,{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"عناصر الطلب"})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:a.items&&a.items.length>0?a.items.map(c=>{var g,f;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:c.product_name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["الكمية: ",c.quantity," ",c.unit||""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[(g=c.total_price)==null?void 0:g.toLocaleString("ar-SA")," ر.س"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["سعر الوحدة: ",(f=c.unit_price)==null?void 0:f.toLocaleString("ar-SA")," ر.س"]})]})]},c.id)}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"لا توجد عناصر في هذا الطلب."})})})]}),e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[e.jsx(O,{children:e.jsx(T,{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"المدفوعات"})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:a.payments&&a.payments.length>0?a.payments.map(c=>{var g;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["دفعة #",c.payment_number]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["طريقة الدفع: ",c.payment_method]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[(g=c.amount)==null?void 0:g.toLocaleString("ar-SA")," ر.س"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["تاريخ الدفع: ",new Date(c.payment_date).toLocaleDateString("ar-SA")]})]})]},c.id)}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"لا توجد دفعات لهذا الطلب."})})})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"لم يتم العثور على طلب الشراء."})};let Mt=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const Pt=[{id:1,title:"عرض سعر: أثاث مكتبي",description:"عرض سعر لتوريد أثاث مكتبي متكامل",supplier:{id:1,company_name:"شركة النور للإلكترونيات"},total_amount:18500,status:"sent",items:[{name:"مكاتب إدارية",quantity:8,price:3e3,unit:"قطعة"}],created_at:"2024-01-12",valid_until:"2024-02-12"},{id:2,title:"عرض سعر: إلكترونيات مكتبية",description:"عرض سعر لتوريد أجهزة كمبيوتر ومعدات إلكترونية",supplier:{id:3,company_name:"شركة التقنية الآمنة"},total_amount:22e3,status:"accepted",items:[{name:"حواسيب محمولة",quantity:6,price:4e3,unit:"قطعة"}],created_at:"2024-01-10",accepted_at:"2024-01-15"}],ls=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),f=l.useCallback(async()=>{x(!0);try{await new Promise(t=>setTimeout(t,800)),a(Pt)}catch(t){console.error("Error fetching quotations:",t),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}},[]);l.useEffect(()=>{f()},[f]);const h=t=>{const{name:s,value:n}=t.target;g(j=>({...j,[s]:n}))},m=async t=>{if(t.preventDefault(),!!d){x(!0);try{await new Promise(s=>setTimeout(s,1e3)),a(s=>s.map(n=>n.id===d.id?{...n,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:n)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(s){alert(`خطأ: ${s.message}`)}finally{x(!1)}}},o=t=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(s=>s.map(n=>n.id===t?{...n,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:n)),alert("تم رفض عرض السعر بنجاح"))};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>f(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(Mt,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"المدفوعات"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(t=>{var s,n;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":t.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":t.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:t.status==="sent"?"مرسل":t.status==="accepted"?"مقبول":t.status==="rejected"?"مرفوض":t.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((s=t.supplier)==null?void 0:s.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(n=t.total_amount)==null?void 0:n.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",t.items.length]})]}),t.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(t.valid_until).toLocaleDateString("ar-SA")]}),t.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",t.order_number]}),t.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",t.rejection_reason]}),t.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===t.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(t),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:h,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:h,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:h,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:h,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>o(t.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},t.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})};let It=class extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}};const Lt=[{id:1,title:"عرض سعر: أثاث مكتبي",description:"عرض سعر لتوريد أثاث مكتبي متكامل",supplier:{id:1,company_name:"شركة النور للإلكترونيات"},total_amount:18500,status:"sent",items:[{name:"مكاتب إدارية",quantity:8,price:3e3,unit:"قطعة"},{name:"كراسي مكتب",quantity:12,price:750,unit:"قطعة"},{name:"خزانات أوراق",quantity:4,price:1200,unit:"قطعة"}],created_at:"2024-01-12",valid_until:"2024-02-12",delivery_terms:"15 يوم عمل من تاريخ الموافقة",payment_terms:"50% مقدم، 50% عند التسليم"},{id:2,title:"عرض سعر: إلكترونيات مكتبية",description:"عرض سعر لتوريد أجهزة كمبيوتر ومعدات إلكترونية",supplier:{id:3,company_name:"شركة التقنية الآمنة"},total_amount:22e3,status:"accepted",items:[{name:"حواسيب محمولة",quantity:6,price:4e3,unit:"قطعة"},{name:"شاشات عرض",quantity:8,price:2e3,unit:"قطعة"},{name:"طابعات ليزر",quantity:2,price:1500,unit:"قطعة"}],created_at:"2024-01-10",accepted_at:"2024-01-15",order_number:"ORD-2024-001",delivery_terms:"10 يوم عمل من تاريخ الموافقة",payment_terms:"دفع كامل عند التسليم"},{id:3,title:"عرض سعر: نظام أمني",description:"عرض سعر لتوريد وتركيب نظام مراقبة أمنية",supplier:{id:2,company_name:"مصنع الأخشاب الذهبية"},total_amount:12500,status:"sent",items:[{name:"كاميرات مراقبة",quantity:10,price:500,unit:"قطعة"},{name:"جهاز تسجيل",quantity:2,price:1e3,unit:"جهاز"},{name:"شاشات عرض",quantity:2,price:2e3,unit:"قطعة"}],created_at:"2024-01-14",valid_until:"2024-02-14",delivery_terms:"7 يوم عمل من تاريخ الموافقة",payment_terms:"30% مقدم، 70% عند التسليم"},{id:4,title:"عرض سعر: طابعة ضغط",description:"عرض سعر لتوريد طابعة ضغط كبيرة",supplier:{id:4,company_name:"شركة الطباعة الحديثة"},total_amount:8500,status:"rejected",items:[{name:"طابعة ضغط كبيرة",quantity:1,price:3500,unit:"جهاز"},{name:"حبر طابعة ملون",quantity:5,price:150,unit:"عبوة"},{name:"ورق طباعة",quantity:10,price:200,unit:"حزمة"}],created_at:"2024-01-08",rejected_at:"2024-01-12",rejection_reason:"السعر أعلى من الميزانية المخصصة"}],ds=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),[f,h]=l.useState(0);l.useEffect(()=>{(async()=>{x(!0);try{await new Promise(n=>setTimeout(n,800)),a(Lt)}catch(n){console.error("Error fetching quotations:",n),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}})()},[f]);const m=s=>{const{name:n,value:j}=s.target;g($=>({...$,[n]:j}))},o=async s=>{if(s.preventDefault(),!!d){x(!0);try{await new Promise(n=>setTimeout(n,1e3)),a(n=>n.map(j=>j.id===d.id?{...j,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:j)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(n){alert(`خطأ: ${n.message}`)}finally{x(!1)}}},t=s=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(n=>n.map(j=>j.id===s?{...j,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:j)),alert("تم رفض عرض السعر بنجاح"))};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>h(s=>s+1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(It,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"شركات الشحن"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(s=>{var n,j;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":s.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":s.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:s.status==="sent"?"مرسل":s.status==="accepted"?"مقبول":s.status==="rejected"?"مرفوض":s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((n=s.supplier)==null?void 0:n.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(j=s.total_amount)==null?void 0:j.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",s.items.length]})]}),s.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(s.valid_until).toLocaleDateString("ar-SA")]}),s.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",s.order_number]}),s.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",s.rejection_reason]}),s.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===s.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(s),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:m,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:m,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:m,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:m,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>t(s.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},s.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})},cs=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState({origin_address:"",destination_address:"",package_details:"",weight:"",dimensions:"",delivery_date_required:"",notes:""}),[u,N]=l.useState(!1),c=async()=>{x(!0);try{const h=await z("/api/merchant/shipping-quotes");a(h.quotes)}catch(h){S(h.message)}finally{x(!1)}};l.useEffect(()=>{c()},[]);const g=h=>{const{name:m,value:o}=h.target;v(t=>({...t,[m]:o}))},f=async h=>{h.preventDefault(),x(!0);try{await z("/api/merchant/shipping-quotes",{method:"POST",body:d}),alert("تم إنشاء طلب عرض الشحن بنجاح!"),N(!1),v({origin_address:"",destination_address:"",package_details:"",weight:"",dimensions:"",delivery_date_required:"",notes:""}),c()}catch(m){alert(`خطأ: ${m.message}`)}finally{x(!1)}};return i&&r.length===0?e.jsx("div",{className:"text-center py-8",children:"جاري تحميل عروض الشحن..."}):b?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["خطأ في تحميل البيانات: ",b]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"عروض الشحن"}),e.jsxs(q,{open:u,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ne,{className:"h-4 w-4 ml-2"})," طلب عرض شحن جديد"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"إنشاء طلب عرض شحن جديد"})}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"origin_address",children:"عنوان المنشأ"}),e.jsx(k,{id:"origin_address",name:"origin_address",value:d.origin_address,onChange:g,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"destination_address",children:"عنوان الوجهة"}),e.jsx(k,{id:"destination_address",name:"destination_address",value:d.destination_address,onChange:g,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"package_details",children:"تفاصيل الطرد"}),e.jsx(L,{id:"package_details",name:"package_details",value:d.package_details,onChange:g})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"weight",children:"الوزن (كجم)"}),e.jsx(k,{id:"weight",name:"weight",type:"number",step:"0.01",value:d.weight,onChange:g})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"dimensions",children:"الأبعاد (طولxعرضxارتفاع سم)"}),e.jsx(k,{id:"dimensions",name:"dimensions",value:d.dimensions,onChange:g})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_required",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_required",name:"delivery_date_required",type:"date",value:d.delivery_date_required,onChange:g})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:d.notes,onChange:g})]}),e.jsx(W,{children:e.jsxs(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:[e.jsx(Ne,{className:"h-4 w-4 ml-2"})," إرسال الطلب"]})})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(h=>{var m;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{children:[e.jsxs(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["طلب شحن #",h.request_number]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",h.origin_address," إلى: ",h.destination_address]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(me,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["تفاصيل الطرد: ",h.package_details]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(xe,{className:"h-4 w-4 text-purple-500 ml-2"}),e.jsxs("span",{children:["تاريخ التسليم المطلوب: ",h.delivery_date_required]})]}),h.shipping_company&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(ge,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["شركة الشحن: ",h.shipping_company.company_name]})]}),h.quoted_price&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-orange-500 ml-2"}),e.jsxs("span",{children:["السعر المقترح: ",(m=h.quoted_price)==null?void 0:m.toLocaleString("ar-SA")," ر.س"]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${h.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":h.status==="quoted"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":h.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:["الحالة: ",h.status==="pending"?"معلق":h.status==="quoted"?"تم التسعير":h.status==="accepted"?"مقبول":h.status]})})]})]},h.id)}):e.jsx("p",{className:"col-span-full text-center text-gray-500 dark:text-gray-400",children:"لا توجد عروض شحن حتى الآن."})})]})},os=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(!1),[u,N]=l.useState(!1),[c,g]=l.useState({report_type:"purchases",title:"",description:"",date_from:"",date_to:""}),f=async()=>{x(!0);try{const o=await z("/api/merchant/reports");if(!o||!o.reports||o.reports.length===0)throw new Error("empty");a(o.reports),v(!1)}catch(o){console.warn("Reports fetch failed, falling back to mock data:",o.message),S(null),a([{id:1,title:"تقرير مشتريات - الفترة الحالية",report_type:"purchases",description:"ملخص المشتريات والموردين خلال الفترة المحددة",date_from:"2024-01-01",date_to:"2024-06-30"},{id:2,title:"تقرير المدفوعات",report_type:"payments",description:"تفاصيل المدفوعات المحوّلة للموردين",date_from:"2024-05-01",date_to:"2024-05-31"}]),v(!0)}finally{x(!1)}};l.useEffect(()=>{f()},[]);const h=(o,t)=>{g(s=>({...s,[o]:t}))},m=async o=>{o.preventDefault(),x(!0);try{await z("/api/merchant/reports/generate",{method:"POST",body:c}),alert("تم إنشاء التقرير بنجاح!"),N(!1),g({report_type:"purchases",title:"",description:"",date_from:"",date_to:""}),f()}catch(t){alert(`خطأ: ${t.message}`)}finally{x(!1)}};return i&&r.length===0?e.jsx("div",{className:"text-center py-8",children:"جاري تحميل التقارير..."}):b?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["خطأ في تحميل البيانات: ",b]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"التقارير"}),d&&e.jsx("div",{className:"p-3 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded",children:"بيانات العرض مؤقتة (وهمية) — لم يتم الحصول على تقارير من الخادم، لذلك نعرض بيانات تجريبية."}),e.jsxs(q,{open:u,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ne,{className:"h-4 w-4 ml-2"})," إنشاء تقرير جديد"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"إنشاء تقرير جديد"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"report_type",children:"نوع التقرير"}),e.jsxs(ie,{name:"report_type",value:c.report_type,onValueChange:o=>h("report_type",o),children:[e.jsx(ce,{children:e.jsx(de,{placeholder:"اختر نوع التقرير"})}),e.jsxs(oe,{children:[e.jsx(V,{value:"purchases",children:"المشتريات"}),e.jsx(V,{value:"payments",children:"المدفوعات"}),e.jsx(V,{value:"suppliers",children:"الموردين"}),e.jsx(V,{value:"inventory",children:"المخزون"}),e.jsx(V,{value:"profit_loss",children:"الأرباح والخسائر"})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"title",children:"العنوان"}),e.jsx(k,{id:"title",name:"title",value:c.title,onChange:o=>h("title",o.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"description",children:"الوصف"}),e.jsx(k,{id:"description",name:"description",value:c.description,onChange:o=>h("description",o.target.value)})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"date_from",children:"من تاريخ"}),e.jsx(k,{id:"date_from",name:"date_from",type:"date",value:c.date_from,onChange:o=>h("date_from",o.target.value)})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"date_to",children:"إلى تاريخ"}),e.jsx(k,{id:"date_to",name:"date_to",type:"date",value:c.date_to,onChange:o=>h("date_to",o.target.value)})]}),e.jsx(W,{children:e.jsxs(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:[e.jsx(se,{className:"h-4 w-4 ml-2"})," إنشاء التقرير"]})})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(o=>e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["نوع التقرير: ",o.report_type]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:o.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(xe,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["الفترة: ",o.date_from," - ",o.date_to]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(w,{variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50 dark:text-green-400 dark:border-green-400",children:[e.jsx(jt,{className:"h-4 w-4 ml-2"})," تحميل التقرير"]})})]})]},o.id)):e.jsx("p",{className:"col-span-full text-center text-gray-500 dark:text-gray-400",children:"لا توجد تقارير حتى الآن."})})]})};class Qt extends Y.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Error caught by boundary:",a,i)}render(){return this.state.hasError?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"حدث خطأ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"عذراً، حدث خطأ أثناء عرض عروض الأسعار المستلمة. يرجى المحاولة مرة أخرى."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):this.props.children}}const Bt=[{id:1,title:"عرض أسعار لطلب معدات مكتبية",description:"قائمة بمستلزمات مكتبية مطلوبة من التاجر",supplier:{company_name:"مورد الأنظمة الحديثة"},total_amount:12500,items:[{name:"طاولة مكتب",qty:10},{name:"كرسي",qty:10}],valid_until:"2025-09-12",status:"sent"},{id:2,title:"عرض أسعار شاشات عرض",description:"شاشات بقياس 24 و 27 بوصة",supplier:{company_name:"الشاشات المتحدة"},total_amount:9500,items:[{name:'شاشة 24"',qty:5}],valid_until:"2025-09-10",status:"accepted",order_number:"ORD-2024-101"}],ms=()=>{const[r,a]=l.useState([]),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(null),[u,N]=l.useState(!1),[c,g]=l.useState({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""}),[f,h]=l.useState(0);l.useEffect(()=>{(async()=>{try{await new Promise(n=>setTimeout(n,300)),a(Bt)}catch(n){console.error("Error fetching quotations:",n),S("حدث خطأ أثناء تحميل عروض الأسعار")}finally{x(!1)}})()},[f]);const m=s=>{const{name:n,value:j}=s.target;g($=>({...$,[n]:j}))},o=async s=>{if(s.preventDefault(),!!d){x(!0);try{await new Promise(n=>setTimeout(n,1e3)),a(n=>n.map(j=>j.id===d.id?{...j,status:"accepted",accepted_at:new Date().toISOString().split("T")[0],order_number:`ORD-2024-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`}:j)),alert("تم قبول عرض السعر وإنشاء طلب الشراء بنجاح!"),N(!1),v(null),g({payment_method:"bank_transfer",delivery_address:"",delivery_date_requested:"",notes:""})}catch(n){alert(`خطأ: ${n.message}`)}finally{x(!1)}}},t=s=>{window.confirm("هل أنت متأكد من رفض هذا العرض؟")&&(a(n=>n.map(j=>j.id===s?{...j,status:"rejected",rejected_at:new Date().toISOString().split("T")[0],rejection_reason:"تم الرفض من قبل المستخدم"}:j)),alert("تم رفض عرض السعر بنجاح"))};return i&&r.length===0?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-16 w-16 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"جاري تحميل عروض الأسعار المستلمة..."})]})}):b?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-6 bg-white rounded-lg shadow-md border border-red-200",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"خطأ في تحميل البيانات"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>h(s=>s+1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]})}):e.jsx(Qt,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"الملف الشخصي"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(s=>{var n,j;return e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden transform transition-transform hover:scale-105 duration-300",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(T,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100":s.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":s.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:s.status==="sent"?"مرسل":s.status==="accepted"?"مقبول":s.status==="rejected"?"مرفوض":s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["من: ",((n=s.supplier)==null?void 0:n.company_name)||"غير معروف"]})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.description}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 ml-2"}),e.jsxs("span",{children:["المبلغ الإجمالي: ",(j=s.total_amount)==null?void 0:j.toLocaleString("ar-SA")," ر.س"]})]}),e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500 ml-2"}),e.jsxs("span",{children:["عدد المنتجات: ",s.items.length]})]}),s.valid_until&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-2",children:"⏱️"})," صالح حتى: ",new Date(s.valid_until).toLocaleDateString("ar-SA")]}),s.order_number&&e.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📋"})," رقم الطلب: ",s.order_number]}),s.rejection_reason&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[e.jsx("span",{className:"font-medium",children:"سبب الرفض:"})," ",s.rejection_reason]}),s.status==="sent"&&e.jsxs("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse mt-4",children:[e.jsxs(q,{open:u&&(d==null?void 0:d.id)===s.id,onOpenChange:N,children:[e.jsx(H,{asChild:!0,children:e.jsxs(w,{onClick:()=>v(s),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," قبول"]})}),e.jsxs(K,{className:"sm:max-w-[600px] bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx(G,{children:e.jsx(J,{children:"قبول عرض السعر وإنشاء طلب شراء"})}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"payment_method",children:"طريقة الدفع"}),e.jsx(k,{id:"payment_method",name:"payment_method",value:c.payment_method,onChange:m,list:"payment-methods"}),e.jsxs("datalist",{id:"payment-methods",children:[e.jsx("option",{value:"bank_transfer",children:"تحويل بنكي"}),e.jsx("option",{value:"credit_card",children:"بطاقة ائتمان"}),e.jsx("option",{value:"cash",children:"نقداً"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_address",children:"عنوان التسليم"}),e.jsx(k,{id:"delivery_address",name:"delivery_address",value:c.delivery_address,onChange:m,placeholder:"أدخل عنوان التسليم بالكامل",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"delivery_date_requested",children:"تاريخ التسليم المطلوب"}),e.jsx(k,{id:"delivery_date_requested",name:"delivery_date_requested",type:"date",value:c.delivery_date_requested,onChange:m,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"notes",children:"ملاحظات"}),e.jsx(L,{id:"notes",name:"notes",value:c.notes,onChange:m,placeholder:"أي ملاحظات إضافية للطلب"})]}),e.jsx(W,{children:e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"})," جاري المعالجة..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 ml-2"})," تأكيد القبول"]})})})]})]})]}),e.jsxs(w,{onClick:()=>t(s.id),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," رفض"]})]})]})]},s.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(E,{className:"h-16 w-16 mx-auto"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"لا توجد عروض أسعار مستلمة حتى الآن."})]})})]})})},xs=()=>{const[r,a]=l.useState(null),[i,x]=l.useState(!0),[b,S]=l.useState(null),[d,v]=l.useState(!1),[u,N]=l.useState(!1),[c,g]=l.useState({}),f=async()=>{x(!0);try{const t=await z("/api/merchant/settings");if(!t||!t.settings)throw new Error("empty");a(t.settings),g(t.settings),v(!1)}catch(t){console.warn("Failed to fetch merchant settings, using mock:",t.message),S(null);const s={language:"ar",timezone:"Asia/Riyadh",currency:"SAR",email_notifications:"enabled",sms_notifications:"disabled",theme:"light"};a(s),g(s),v(!0)}finally{x(!1)}};l.useEffect(()=>{f()},[]);const h=t=>{const{name:s,value:n}=t.target;g(j=>({...j,[s]:n}))},m=(t,s)=>{g(n=>({...n,[t]:s}))},o=async()=>{x(!0);try{await z("/api/merchant/settings",{method:"PUT",body:c}),alert("تم تحديث الإعدادات بنجاح!"),N(!1),f()}catch(t){alert(`خطأ: ${t.message}`)}finally{x(!1)}};return i?e.jsx("div",{className:"text-center py-8",children:"جاري تحميل الإعدادات..."}):b?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["خطأ في تحميل البيانات: ",b]}):r?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"الإعدادات"}),d&&e.jsx("div",{className:"p-3 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 rounded",children:"بيانات الإعدادات المعروضة مؤقتة (وهمية). تأكد من أن الخادم يعمل أو سجّل الدخول للحصول على إعدادات حقيقية."}),e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[e.jsxs(O,{className:"flex flex-row items-center justify-between",children:[e.jsx(T,{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"الإعدادات العامة"}),u?e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsxs(w,{onClick:o,className:"bg-green-600 hover:bg-green-700 text-white",disabled:i,children:[e.jsx(bt,{className:"h-4 w-4 ml-2"})," حفظ"]}),e.jsxs(w,{onClick:()=>N(!1),variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50 dark:text-red-400 dark:border-red-400",children:[e.jsx(ee,{className:"h-4 w-4 ml-2"})," إلغاء"]})]}):e.jsxs(w,{onClick:()=>N(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(yt,{className:"h-4 w-4 ml-2"})," تعديل"]})]}),e.jsxs(A,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"language",children:"اللغة"}),e.jsxs(ie,{name:"language",value:u?c.language:r.language,onValueChange:t=>m("language",t),disabled:!u,children:[e.jsx(ce,{children:e.jsx(de,{placeholder:"اختر اللغة"})}),e.jsxs(oe,{children:[e.jsx(V,{value:"ar",children:"العربية"}),e.jsx(V,{value:"en",children:"الإنجليزية"})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"timezone",children:"المنطقة الزمنية"}),e.jsx(k,{id:"timezone",name:"timezone",value:u?c.timezone:r.timezone,onChange:h,disabled:!u})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"currency",children:"العملة الافتراضية"}),e.jsx(k,{id:"currency",name:"currency",value:u?c.currency:r.currency,onChange:h,disabled:!u})]})]})]}),e.jsxs(D,{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[e.jsx(O,{children:e.jsx(T,{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"إعدادات الإشعارات"})}),e.jsxs(A,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"email_notifications",children:"إشعارات البريد الإلكتروني"}),e.jsxs(ie,{name:"email_notifications",value:u?c.email_notifications:r.email_notifications,onValueChange:t=>m("email_notifications",t),disabled:!u,children:[e.jsx(ce,{children:e.jsx(de,{placeholder:"اختر"})}),e.jsxs(oe,{children:[e.jsx(V,{value:"enabled",children:"مفعلة"}),e.jsx(V,{value:"disabled",children:"معطلة"})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"sms_notifications",children:"إشعارات الرسائل القصيرة"}),e.jsxs(ie,{name:"sms_notifications",value:u?c.sms_notifications:r.sms_notifications,onValueChange:t=>m("sms_notifications",t),disabled:!u,children:[e.jsx(ce,{children:e.jsx(de,{placeholder:"اختر"})}),e.jsxs(oe,{children:[e.jsx(V,{value:"enabled",children:"مفعلة"}),e.jsx(V,{value:"disabled",children:"معطلة"})]})]})]})]})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"لم يتم العثور على الإعدادات."})};export{w as B,D as C,k as I,y as L,Vt as M,z as a,A as b,O as c,T as d,ft as e,qt as f,xs as g,ms as h,os as i,cs as j,ds as k,ls as l,rs as m,as as n,ts as o,Zt as p,Xt as q,Wt as r,we as s,Kt as t,Ut as u};
